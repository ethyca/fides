"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FixedIntegerRangeEncoder=void 0;const DecodingError_js_1=require("../../error/DecodingError.js"),BooleanEncoder_js_1=require("./BooleanEncoder.js"),FixedIntegerEncoder_js_1=require("./FixedIntegerEncoder.js");class FixedIntegerRangeEncoder{static encode(e){e.sort(((e,r)=>e-r));let r=[],n=0;for(;n<e.length;){let d=n;for(;d<e.length-1&&e[d]+1===e[d+1];)d++;r.push(e.slice(n,d+1)),n=d+1}let d=FixedIntegerEncoder_js_1.FixedIntegerEncoder.encode(r.length,12);for(let e=0;e<r.length;e++)1===r[e].length?d+="0"+FixedIntegerEncoder_js_1.FixedIntegerEncoder.encode(r[e][0],16):d+="1"+FixedIntegerEncoder_js_1.FixedIntegerEncoder.encode(r[e][0],16)+FixedIntegerEncoder_js_1.FixedIntegerEncoder.encode(r[e][r[e].length-1],16);return d}static decode(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new DecodingError_js_1.DecodingError("Undecodable FixedIntegerRange '"+e+"'");let r=[],n=FixedIntegerEncoder_js_1.FixedIntegerEncoder.decode(e.substring(0,12)),d=12;for(let o=0;o<n;o++){let n=BooleanEncoder_js_1.BooleanEncoder.decode(e.substring(d,d+1));if(d++,!0===n){let n=FixedIntegerEncoder_js_1.FixedIntegerEncoder.decode(e.substring(d,d+16));d+=16;let o=FixedIntegerEncoder_js_1.FixedIntegerEncoder.decode(e.substring(d,d+16));d+=16;for(let e=n;e<=o;e++)r.push(e)}else{let n=FixedIntegerEncoder_js_1.FixedIntegerEncoder.decode(e.substring(d,d+16));r.push(n),d+=16}}return r}}exports.FixedIntegerRangeEncoder=FixedIntegerRangeEncoder;