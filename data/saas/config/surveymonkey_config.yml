saas_config:
    fides_key: <instance_fides_key>
    name: Surveymonkey SaaS Config
    type: surveymonkey
    description: A sample schema representing the Surveymonkey connector for Fidesops
    version: 0.0.1
  
    connector_params:
      - name: domain
      - name: access_token

    external_references:
      - name: surveymonkey_survey_id
        label: Surveymonkey Survey ID
        description: Dataset reference to the location of Surveymonkey Survey IDs

    client_config:
      protocol: https
      host: <domain>
      authentication:
        strategy: bearer
        configuration:
          token: <access_token>
  
    test_request:
      method: GET
      path: /v3/users/me
  
    endpoints:
      - name: contacts
        requests:
          read:
            method: GET
            path: /v3/contacts
            param_values:
              - name: placeholder
                identity: email
            postprocessors:
              - strategy: filter
                configuration:
                  field: email
                  value:
                    identity: email
            data_path: data
          update:
            method: PATCH
            path: /v3/contacts/<contact_id>
            body: |
              {
                <masked_object_fields>
              }
            param_values:
              - name: contact_id
                references:
                  - dataset: <instance_fides_key>
                    field: contacts.id
                    direction: from
      - name: survey_collectors
        requests:
          read:
            method: GET
            path: /v3/surveys/<survey_id>/collectors
            param_values:
              - name: survey_id
                references:
                  - surveymonkey_survey_id
            data_path: data
            pagination:
              strategy: link
              configuration:
                source: body
                path: links.next
      - name: survey_responses
        requests:
          read:
            method: GET
            path: /v3/collectors/<collector_id>/responses/bulk
            param_values:
              - name: collector_id
                references:
                  - dataset: <instance_fides_key>
                    field: survey_collectors.id
                    direction: from
            postprocessors:
              - strategy: filter
                configuration:
                  field: metadata.contact.email.value
                  value:
                    identity: email
            data_path: data
            pagination:
              strategy: link
              configuration:
                source: body
                path: links.next
          update:
            method: PATCH
            path: /v3/collectors/<collector_id>/responses/<response_id>
            body: |
              {
                <masked_object_fields>
              }
            param_values:
              - name: collector_id
                references:
                  - dataset: <instance_fides_key>
                    field: survey_responses.collector_id
                    direction: from
              - name: response_id
                references:
                  - dataset: <instance_fides_key>
                    field: survey_responses.id
                    direction: from