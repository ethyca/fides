saas_config:
  fides_key: <instance_fides_key>
  name: OpenWeb
  type: openweb
  description: A sample schema representing the OpenWeb integration for Fides
  user_guide: https://docs.ethyca.com/user-guides/integrations/saas-integrations/openweb
  version: 0.1.0

  connector_params:
    - name: domain
      label: Domain (default www.spot.im)
      default_value: www.spot.im
    - name: api_key
      label: SSO Authentication Token
      description: Value of the OpenWeb SSO Authentication token. This can be found in your OpenWeb admni GUI by going to 'Settings' then navigate to the Authenticaiton Tokens.
    - name: x_spot_id
      label: Your SPOT_ID, the unique OpenWeb identifier for your property. You can determine your this by logging into your Admin Dashboard. Then, copy your Spot ID from the URL. The value will show up like this example - https://admin.spot.im/spot/{SPOT_ID}/... 

    # - name: primary_key
    #   label: The 
    #   default_value: testuser

  external_references:
    - name: <primary_key>
      label: Primary key determined from read request.
      description: Fix this

  client_config:
    protocol: https
    host: <domain>
    authentication:
      strategy: api_key
      configuration:
        headers:
          - name: x-spotim-sso-access-token
            value: <api_key>

  test_request:
    method: GET
    path: /api/sso/v1/user/<primary_key>
    param_values:
      - name: primary_key
        connector_param: primary_key

  endpoints:
    - name: user
      requests:
        read:
          method: GET
          path: /api/sso/v1/user/<primary_key>
          data_path: user
          param_values:
            - name: primary_key
              connector_param: primary_key
        delete:
          method: POST
          path: /api/sso/v1/user/<primary_key>
          param_values:
            - name: primary_key
              references:
                - dataset: <instance_fides_key>
                field: user.primary_key
                direction: from